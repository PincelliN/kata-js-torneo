<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>kata-js-torneo</title>
  </head>
  <body>
    ciao
    <script>
      const fighters = [
        {
          name: "Freezer",
          power: 8000,
        },
        {
          name: "Vegeta",
          power: 8500,
        },
        {
          name: "Crilin",
          power: 500,
        },
        {
          name: "Mr Satan",
          power: 50,
        },
        {
          name: "Junior",
          power: 6000,
        },
        {
          name: "Goku",
          power: 9001,
        },
        {
          name: "Tensing",
          power: 450,
        },
        {
          name: "Videl",
          power: 300,
        },
        {
          name: "Bulma",
          power: 20,
        },
        {
          name: "C-18",
          power: 7800,
        },
        {
          name: "Gohan",
          power: 8900,
        },
        {
          name: "Trunks",
          power: 1250,
        },
      ];

      const weapons = [
        {
          name: "Ventaglio della Musa",
          power: 15,
        },
        {
          name: "Scouter",
          power: 30,
        },
        {
          name: "Bastone Roshi",
          power: 60,
        },
        {
          name: "Fagioli Magici",
          power: 70,
        },
        {
          name: "Katana di Yajirobei",
          power: 85,
        },
        {
          name: "Spada del Dragone Azzurro",
          power: 115,
        },
        {
          name: "Armatura Saiyan",
          power: 145,
        },
        {
          name: "Cannone da braccio",
          power: 170,
        },
        {
          name: "Nuvola d'oro",
          power: 200,
        },
        {
          name: "Bastone Nyoi",
          power: 220,
        },
        {
          name: "Spada Z",
          power: 235,
        },
        {
          name: "Orecchini Potara",
          power: 250,
        },
      ];

      let fightersWeapons = [];
      for (let index = 0; index < fighters.length; index++) {
        let element = fighters[index];
        let elementWeapon = weapons[index];
        element.weapons = elementWeapon;
        fightersWeapons.push(element);
      }
      console.log(fightersWeapons);

      fightersWeapons.forEach(
        (x) => (x.power = x.power * (Math.floor(Math.random() * 100) + 1))
      );
      let qualified = fightersWeapons.filter(
        (x) => parseInt(x.power) + parseInt(x.weapons.power) > 2000
      );

      if (qualified.length % 2 != 0) {
        let bot = { name: "Robot", power: 4000 };
        qualified.push(bot);
      }
      console.log(qualified);
      let matchs = [];
      let start = 0;
      let end = 2;
      while (end <= qualified.length) {
        let match = qualified.slice(start, end);

        matchs.push(match);
        start += 2;
        end += 2;
      }

      console.log(matchs, matchs[0]);
      let winFirst = [];
      for (let index = 0; index < matchs.length; index++) {
        winFirst = matchs[index];
        if (
          parseInt(matchs[index][0].power) +
            (matchs[index][0].weapons.power
              ? parseInt(matchs[index][0].weapons.power)
              : 0) >
          parseInt(matchs[index][1].power) +
            (matchs[index][1].weapons.power
              ? parseInt(matchs[index][1].weapons.power)
              : 0)
        ) {
          winFirst.push([index][0]);
        } else {
          winFirst.push([index][1]);
        }
      }
      console.log(winFirst);
    </script>
  </body>
</html>
